[13:34:21][DEBUG](com.nucco.beans.User) - { CALL PG_AUTH.LOGIN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) }
[13:34:22][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[13:34:22][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[13:34:27][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[13:34:27][DEBUG](com.nucco.beans.Sales) - SELECT SEQ, NAME, IS_RAW_SALESCOUNT, ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NVL(MAX(DEPTH), 0) FROM TB_ORGANIZATION WHERE COMPANY_SEQ = A.SEQ ) AS DEPTH FROM TB_COMPANY A ORDER BY NAME
[13:34:28][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_STEP' AND CODE <> '000' ORDER BY CODE
[13:34:28][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_TYPE' AND CODE <> '000' ORDER BY CODE
[13:34:28][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:35:37][DEBUG](com.nucco.beans.User) - { CALL PG_AUTH.LOGIN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) }
[14:35:37][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:35:38][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:35:42][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:35:42][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A) */ SEQ, NAME, IS_RAW_SALESCOUNT, ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NVL(MAX(DEPTH), 0) FROM TB_ORGANIZATION WHERE COMPANY_SEQ = A.SEQ ) AS DEPTH FROM TB_COMPANY A WHERE SEQ = ? ORDER BY NAME
[14:35:42][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = ? AND DEPTH = 0 AND SORT = 0 AND ROWNUM = 1
[14:35:42][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ, NAME FROM TB_ORGANIZATION WHERE DEPTH = 0 AND SORT = 1 START WITH COMPANY_SEQ = ? AND SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_VENDING_MACHINE_HISTORY) */ ORGANIZATION_SEQ FROM TB_VENDING_MACHINE_HISTORY WHERE COMPANY_SEQ = ? AND USER_SEQ = ? GROUP BY ORGANIZATION_SEQ ) CONNECT BY SEQ = PRIOR PARENT_SEQ GROUP BY NAME, SEQ ORDER BY NAME, SEQ
[14:35:42][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED INDEX(A) USE_NL(B C) */ B.SEQ, B.PLACE, B.END_DATE FROM TB_VENDING_MACHINE_HISTORY A INNER JOIN TB_VENDING_MACHINE_PLACE B ON A.VM_SEQ = B.VM_SEQ AND ( A.END_DATE IS NULL OR A.END_DATE <= B.END_DATE ) INNER JOIN TB_VENDING_MACHINE C ON A.VM_SEQ = C.SEQ WHERE A.COMPANY_SEQ = ? AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = ? AND PARENT_SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) GROUP BY B.PLACE, B.SEQ, B.END_DATE ORDER BY B.PLACE, B.SEQ
[14:35:42][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_STEP' AND CODE <> '000' ORDER BY CODE
[14:35:42][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_TYPE' AND CODE <> '000' ORDER BY CODE
[14:35:42][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:35:49][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:35:49][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210521' AND '20210521' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 40417 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') )
[14:35:49][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, '미등록 상품[' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210521' AND '20210521' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 40417 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') ) ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[14:35:49][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[14:35:49][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[14:38:46][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:38:46][DEBUG](com.nucco.beans.User) - SELECT /*+ ORDERED INDEX(A) USE_NL(B C) */ A.*, B.NAME AS COMPANY, B.IS_SMS_ENABLED, B.IS_KAKAO_ENABLED, C.NAME AS AUTH, C.IS_APP_ORGAN, SUBSTR(A.EMAIL, 1, INSTR(A.EMAIL, '@') - 1) AS EMAIL_1, SUBSTR(EMAIL, INSTR(EMAIL, '@') + 1, LENGTH(EMAIL)) AS EMAIL_2, ( SELECT /*+ INDEX(D) */ REVERSE(LTRIM(SYS_CONNECT_BY_PATH(REVERSE(CASE WHEN IS_ENABLED = 'N' THEN '{' || NAME || '}' ELSE NAME END), '/'), '/')) FROM TB_ORGANIZATION D WHERE PARENT_SEQ = 0 START WITH SEQ = A.ORGANIZATION_SEQ CONNECT BY SEQ = PRIOR PARENT_SEQ ) AS ORGAN FROM TB_USER A LEFT JOIN TB_COMPANY B ON A.COMPANY_SEQ = B.SEQ LEFT JOIN TB_AUTH C ON A.AUTH_SEQ = C.SEQ WHERE A.SEQ = ? AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(A_A) */ SEQ FROM TB_ORGANIZATION A_A WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ )
[14:39:02][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:39:02][DEBUG](com.nucco.beans.VM) - SELECT/*+ INDEX(A) */ COUNT(*) FROM TB_VENDING_MACHINE A  WHERE A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(A_A) */ SEQ FROM TB_ORGANIZATION A_A WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND CODE NOT LIKE 'X%X' 
[14:39:02][DEBUG](com.nucco.beans.VM) - SELECT  A.SEQ, A.CODE, A.PLACE, A.TERMINAL_ID, A.MODEL, A.IS_SOLD_OUT, A.IS_CONTROL_ERROR, A.IS_PD_ERROR, A.IS_EMPTY_COL, A.ASP_CHARGE, TO_CHAR(A.CREATE_DATE, 'YYYY-MM-DD') AS CREATE_DATE, A.COMPANY, A.ORGAN, A.USER_NAME, A.USER_ID,  A.PLACE_CODE,  A.PLACE_NO  ,(SELECT /*+ INDEX(D) */ TO_CHAR(D.CREATE_DATE, 'YYYY-MM-DD HH24:MI:SS')  FROM TB_TXT_STATUS D WHERE A.TERMINAL_ID = D.TERMINAL_ID AND A.TRANSACTION_NO = D.TRANSACTION_NO AND D.CREATE_DATE >= SYSDATE - 1) AS COLLECT_DATE, A.ACCESS_STATUS AS ACCESS_STATUS,  A.MERCHANTNAME,   A.BUSINESSNO,   A.BIZTYPE  FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ ORDERED INDEX(A) USE_HASH(B C) */ B.NAME AS COMPANY, ( SELECT /*+ INDEX(E) */ REVERSE(LTRIM(SYS_CONNECT_BY_PATH(REVERSE(CASE WHEN IS_ENABLED = 'N' THEN '{' || NAME || '}' ELSE NAME END), '/'), '/')) FROM TB_ORGANIZATION E WHERE PARENT_SEQ = 0 START WITH SEQ = A.ORGANIZATION_SEQ CONNECT BY SEQ = PRIOR PARENT_SEQ ) AS ORGAN, CASE WHEN A.PLACE_CODE IS NULL THEN A.PLACE ELSE '[' || A.PLACE_CODE || '] ' || A.PLACE END PLACE, A.TERMINAL_ID, A.SEQ, A.CODE, A.MODEL, A.IS_SOLD_OUT, A.IS_CONTROL_ERROR, A.IS_PD_ERROR, A.IS_EMPTY_COL, A.ASP_CHARGE, A.CREATE_DATE, A.TRANSACTION_NO, A.PLACE_CODE, A.PLACE_NO, C.ID AS USER_ID, C.NAME AS USER_NAME, A.ACCESS_STATUS AS ACCESS_STATUS, MST.MERCHANTNAME, MST.BUSINESSNO, MST.BIZTYPE FROM TB_VENDING_MACHINE A INNER JOIN TB_COMPANY B ON A.COMPANY_SEQ = B.SEQ LEFT JOIN TB_USER C ON A.USER_SEQ = C.SEQ LEFT JOIN TB_TXT_STATUS D ON A.TRANSACTION_NO = D.TRANSACTION_NO  JOIN TBLTERMMST@VANBT TERMST ON     TERMST.TERMINALID = A.TERMINAL_ID   JOIN TBLBIZMST@VANBT MST ON   TERMST.BUSINESSNO = MST.BUSINESSNO AND MST.BIZTYPE=TERMST.BIZTYPE WHERE A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(A_A) */ SEQ FROM TB_ORGANIZATION A_A WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND CODE NOT LIKE 'X%X'  ORDER BY 1, 2, 3, 4 ) A WHERE ROWNUM <= 30 ) A WHERE ROW_NUM >= 1
[14:39:37][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:39:37][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A) */ SEQ, NAME, IS_RAW_SALESCOUNT, ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NVL(MAX(DEPTH), 0) FROM TB_ORGANIZATION WHERE COMPANY_SEQ = A.SEQ ) AS DEPTH FROM TB_COMPANY A WHERE SEQ = ? ORDER BY NAME
[14:39:37][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = ? AND DEPTH = 0 AND SORT = 0 AND ROWNUM = 1
[14:39:37][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ, NAME FROM TB_ORGANIZATION WHERE DEPTH = 0 AND SORT = 1 START WITH COMPANY_SEQ = ? AND SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_VENDING_MACHINE_HISTORY) */ ORGANIZATION_SEQ FROM TB_VENDING_MACHINE_HISTORY WHERE COMPANY_SEQ = ? AND USER_SEQ = ? GROUP BY ORGANIZATION_SEQ ) CONNECT BY SEQ = PRIOR PARENT_SEQ GROUP BY NAME, SEQ ORDER BY NAME, SEQ
[14:39:37][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED INDEX(A) USE_NL(B C) */ B.SEQ, B.PLACE, B.END_DATE FROM TB_VENDING_MACHINE_HISTORY A INNER JOIN TB_VENDING_MACHINE_PLACE B ON A.VM_SEQ = B.VM_SEQ AND ( A.END_DATE IS NULL OR A.END_DATE <= B.END_DATE ) INNER JOIN TB_VENDING_MACHINE C ON A.VM_SEQ = C.SEQ WHERE A.COMPANY_SEQ = ? AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = ? AND PARENT_SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) GROUP BY B.PLACE, B.SEQ, B.END_DATE ORDER BY B.PLACE, B.SEQ
[14:39:37][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_STEP' AND CODE <> '000' ORDER BY CODE
[14:39:37][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_TYPE' AND CODE <> '000' ORDER BY CODE
[14:39:37][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:39:40][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:39:40][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210521' AND '20210521' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') )
[14:39:40][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, '미등록 상품[' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210521' AND '20210521' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') ) ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[14:39:40][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[14:39:40][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[14:39:45][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:39:45][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210501' AND '20210531' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') )
[14:39:46][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, '미등록 상품[' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210501' AND '20210531' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') ) ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[14:39:46][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[14:39:46][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[14:39:50][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:39:50][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210501' AND '20210531' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') )
[14:39:51][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, '미등록 상품[' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210501' AND '20210531' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') ) ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 300) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 271
[14:39:52][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[14:39:52][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[14:39:59][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:39:59][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210501' AND '20210531' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 40417 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') )
[14:40:01][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, '미등록 상품[' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210501' AND '20210531' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 40417 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') ) ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[14:40:01][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[14:40:01][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[14:40:04][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:40:04][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210401' AND '20210430' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 40417 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') )
[14:40:05][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, '미등록 상품[' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210401' AND '20210430' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 40417 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') ) ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[14:40:06][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[14:40:06][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[14:43:31][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:43:31][DEBUG](com.nucco.beans.VM) - SELECT/*+ INDEX(A) */ COUNT(*) FROM TB_VENDING_MACHINE A  WHERE A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(A_A) */ SEQ FROM TB_ORGANIZATION A_A WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND CODE NOT LIKE 'X%X' 
[14:43:31][DEBUG](com.nucco.beans.VM) - SELECT  A.SEQ, A.CODE, A.PLACE, A.TERMINAL_ID, A.MODEL, A.IS_SOLD_OUT, A.IS_CONTROL_ERROR, A.IS_PD_ERROR, A.IS_EMPTY_COL, A.ASP_CHARGE, TO_CHAR(A.CREATE_DATE, 'YYYY-MM-DD') AS CREATE_DATE, A.COMPANY, A.ORGAN, A.USER_NAME, A.USER_ID,  A.PLACE_CODE,  A.PLACE_NO  ,(SELECT /*+ INDEX(D) */ TO_CHAR(D.CREATE_DATE, 'YYYY-MM-DD HH24:MI:SS')  FROM TB_TXT_STATUS D WHERE A.TERMINAL_ID = D.TERMINAL_ID AND A.TRANSACTION_NO = D.TRANSACTION_NO AND D.CREATE_DATE >= SYSDATE - 1) AS COLLECT_DATE, A.ACCESS_STATUS AS ACCESS_STATUS,  A.MERCHANTNAME,   A.BUSINESSNO,   A.BIZTYPE  FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ ORDERED INDEX(A) USE_HASH(B C) */ B.NAME AS COMPANY, ( SELECT /*+ INDEX(E) */ REVERSE(LTRIM(SYS_CONNECT_BY_PATH(REVERSE(CASE WHEN IS_ENABLED = 'N' THEN '{' || NAME || '}' ELSE NAME END), '/'), '/')) FROM TB_ORGANIZATION E WHERE PARENT_SEQ = 0 START WITH SEQ = A.ORGANIZATION_SEQ CONNECT BY SEQ = PRIOR PARENT_SEQ ) AS ORGAN, CASE WHEN A.PLACE_CODE IS NULL THEN A.PLACE ELSE '[' || A.PLACE_CODE || '] ' || A.PLACE END PLACE, A.TERMINAL_ID, A.SEQ, A.CODE, A.MODEL, A.IS_SOLD_OUT, A.IS_CONTROL_ERROR, A.IS_PD_ERROR, A.IS_EMPTY_COL, A.ASP_CHARGE, A.CREATE_DATE, A.TRANSACTION_NO, A.PLACE_CODE, A.PLACE_NO, C.ID AS USER_ID, C.NAME AS USER_NAME, A.ACCESS_STATUS AS ACCESS_STATUS, MST.MERCHANTNAME, MST.BUSINESSNO, MST.BIZTYPE FROM TB_VENDING_MACHINE A INNER JOIN TB_COMPANY B ON A.COMPANY_SEQ = B.SEQ LEFT JOIN TB_USER C ON A.USER_SEQ = C.SEQ LEFT JOIN TB_TXT_STATUS D ON A.TRANSACTION_NO = D.TRANSACTION_NO  JOIN TBLTERMMST@VANBT TERMST ON     TERMST.TERMINALID = A.TERMINAL_ID   JOIN TBLBIZMST@VANBT MST ON   TERMST.BUSINESSNO = MST.BUSINESSNO AND MST.BIZTYPE=TERMST.BIZTYPE WHERE A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(A_A) */ SEQ FROM TB_ORGANIZATION A_A WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND CODE NOT LIKE 'X%X'  ORDER BY 1, 2, 3, 4 ) A WHERE ROWNUM <= 30 ) A WHERE ROW_NUM >= 1
[14:45:38][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:45:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A) */ SEQ, NAME, IS_RAW_SALESCOUNT, ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NVL(MAX(DEPTH), 0) FROM TB_ORGANIZATION WHERE COMPANY_SEQ = A.SEQ ) AS DEPTH FROM TB_COMPANY A WHERE SEQ = ? ORDER BY NAME
[14:45:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = ? AND DEPTH = 0 AND SORT = 0 AND ROWNUM = 1
[14:45:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ, NAME FROM TB_ORGANIZATION WHERE DEPTH = 0 AND SORT = 1 START WITH COMPANY_SEQ = ? AND SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_VENDING_MACHINE_HISTORY) */ ORGANIZATION_SEQ FROM TB_VENDING_MACHINE_HISTORY WHERE COMPANY_SEQ = ? AND USER_SEQ = ? GROUP BY ORGANIZATION_SEQ ) CONNECT BY SEQ = PRIOR PARENT_SEQ GROUP BY NAME, SEQ ORDER BY NAME, SEQ
[14:45:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED INDEX(A) USE_NL(B C) */ B.SEQ, B.PLACE, B.END_DATE FROM TB_VENDING_MACHINE_HISTORY A INNER JOIN TB_VENDING_MACHINE_PLACE B ON A.VM_SEQ = B.VM_SEQ AND ( A.END_DATE IS NULL OR A.END_DATE <= B.END_DATE ) INNER JOIN TB_VENDING_MACHINE C ON A.VM_SEQ = C.SEQ WHERE A.COMPANY_SEQ = ? AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = ? AND PARENT_SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) GROUP BY B.PLACE, B.SEQ, B.END_DATE ORDER BY B.PLACE, B.SEQ
[14:45:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_STEP' AND CODE <> '000' ORDER BY CODE
[14:45:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_TYPE' AND CODE <> '000' ORDER BY CODE
[14:45:38][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:45:43][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:45:43][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210521' AND '20210521' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 38596 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') )
[14:45:44][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, '미등록 상품[' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210521' AND '20210521' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 38596 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') ) ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[14:45:44][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[14:45:44][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[14:45:46][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:45:46][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210501' AND '20210531' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 38596 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') )
[14:45:47][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, '미등록 상품[' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210501' AND '20210531' AND USER_SEQ = 3775 AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 38596 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') ) ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[14:45:48][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[14:45:48][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[14:45:49][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:45:50][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A) */ SEQ, NAME, IS_RAW_SALESCOUNT, ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NVL(MAX(DEPTH), 0) FROM TB_ORGANIZATION WHERE COMPANY_SEQ = A.SEQ ) AS DEPTH FROM TB_COMPANY A WHERE SEQ = ? ORDER BY NAME
[14:45:50][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = ? AND DEPTH = 0 AND SORT = 0 AND ROWNUM = 1
[14:45:50][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ, NAME FROM TB_ORGANIZATION WHERE DEPTH = 0 AND SORT = 1 START WITH COMPANY_SEQ = ? AND SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_VENDING_MACHINE_HISTORY) */ ORGANIZATION_SEQ FROM TB_VENDING_MACHINE_HISTORY WHERE COMPANY_SEQ = ? AND USER_SEQ = ? GROUP BY ORGANIZATION_SEQ ) CONNECT BY SEQ = PRIOR PARENT_SEQ GROUP BY NAME, SEQ ORDER BY NAME, SEQ
[14:45:50][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED INDEX(A) USE_NL(B C) */ B.SEQ, B.PLACE, B.END_DATE FROM TB_VENDING_MACHINE_HISTORY A INNER JOIN TB_VENDING_MACHINE_PLACE B ON A.VM_SEQ = B.VM_SEQ AND ( A.END_DATE IS NULL OR A.END_DATE <= B.END_DATE ) INNER JOIN TB_VENDING_MACHINE C ON A.VM_SEQ = C.SEQ WHERE A.COMPANY_SEQ = ? AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = ? AND PARENT_SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) GROUP BY B.PLACE, B.SEQ, B.END_DATE ORDER BY B.PLACE, B.SEQ
[14:45:50][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_TYPE' AND CODE <> '000' ORDER BY CODE
[14:45:50][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:45:54][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:45:54][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:45:54][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210521' AND '20210521' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 38596 AND A.PAY_TYPE <> '09' GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 38596 AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210521' AND '20210521' ) A WHERE YYYYMMDD BETWEEN '20210521' AND '20210521' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:45:54][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:45:54][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:45:54][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:45:54][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ REVERSE(LTRIM(SYS_CONNECT_BY_PATH(REVERSE(NAME), '/'), '/')) FROM TB_ORGANIZATION WHERE PARENT_SEQ = 0 START WITH SEQ = 11056 CONNECT BY SEQ = PRIOR PARENT_SEQ
[14:45:54][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_VENDING_MACHINE_PLACE) */ PLACE FROM TB_VENDING_MACHINE_PLACE WHERE SEQ = 38596
[14:49:57][DEBUG](com.nucco.beans.User) - UPDATE /*+ INDEX(A) */ TB_USER_LOG A SET OUT_DATE = TO_CHAR(SYSDATE, 'YYYYMMDD'), OUT_TIME = TO_CHAR(SYSDATE, 'HH24MISS'), OUT_IP = ? WHERE SEQ = ? AND HASH_DATA = ?
[14:50:06][DEBUG](com.nucco.beans.User) - { CALL PG_AUTH.LOGIN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) }
[14:50:06][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:50:06][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:50:10][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:50:10][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A) */ SEQ, NAME, IS_RAW_SALESCOUNT, ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NVL(MAX(DEPTH), 0) FROM TB_ORGANIZATION WHERE COMPANY_SEQ = A.SEQ ) AS DEPTH FROM TB_COMPANY A WHERE SEQ = ? ORDER BY NAME
[14:50:10][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = ? AND DEPTH = 0 AND SORT = 0 AND ROWNUM = 1
[14:50:10][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ, NAME FROM TB_ORGANIZATION WHERE DEPTH = 0 AND SORT = 1 START WITH COMPANY_SEQ = ? AND SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? ) CONNECT BY SEQ = PRIOR PARENT_SEQ GROUP BY NAME, SEQ ORDER BY NAME, SEQ
[14:50:10][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED INDEX(A) USE_NL(B C) */ B.SEQ, B.PLACE, B.END_DATE FROM TB_VENDING_MACHINE_HISTORY A INNER JOIN TB_VENDING_MACHINE_PLACE B ON A.VM_SEQ = B.VM_SEQ AND ( A.END_DATE IS NULL OR A.END_DATE <= B.END_DATE ) INNER JOIN TB_VENDING_MACHINE C ON A.VM_SEQ = C.SEQ WHERE A.COMPANY_SEQ = ? AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? UNION SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = ? AND PARENT_SEQ IN ( SELECT ? FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = ? ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) GROUP BY B.PLACE, B.SEQ, B.END_DATE ORDER BY B.PLACE, B.SEQ
[14:50:10][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_STEP' AND CODE <> '000' ORDER BY CODE
[14:50:10][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_TYPE' AND CODE <> '000' ORDER BY CODE
[14:50:10][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:50:15][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:50:15][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210521' AND '20210521' AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 40417 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') )
[14:50:15][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, '미등록 상품[' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210521' AND '20210521' AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH SEQ = 11056 CONNECT BY PRIOR SEQ = PARENT_SEQ) AND VM_PLACE_SEQ = 40417 AND A.PAY_TYPE <> '09'AND ( ((AMOUNT = '100' AND PAY_TYPE = '07')) OR ((AMOUNT <> '100' OR PAY_TYPE <> '07') AND PAY_STEP <> '00') ) ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[14:50:15][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[14:50:15][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
