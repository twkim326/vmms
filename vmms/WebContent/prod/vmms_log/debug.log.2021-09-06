[13:45:21][DEBUG](com.nucco.beans.User) - { CALL PG_AUTH.LOGIN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) }
[13:45:21][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[13:45:22][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[13:46:12][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[13:46:12][DEBUG](com.nucco.beans.Sales) - SELECT SEQ, NAME, IS_RAW_SALESCOUNT, ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NVL(MAX(DEPTH), 0) FROM TB_ORGANIZATION WHERE COMPANY_SEQ = A.SEQ ) AS DEPTH FROM TB_COMPANY A ORDER BY NAME
[13:46:13][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_TYPE' AND CODE <> '000' ORDER BY CODE
[13:46:13][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[13:46:21][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[13:46:22][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[13:46:22][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210831' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210831' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210831' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[13:46:22][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[13:46:22][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[13:46:22][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:09:26][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:09:26][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:09:26][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210831' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND PAY_TYPE IN ('80') GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND PAY_TYPE IN ('80') AND CANCEL_DATE BETWEEN '20210831' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210831' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:09:26][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:09:26][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:09:26][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:09:33][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:09:33][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:09:33][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210831' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210831' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210831' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:09:34][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:09:34][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:09:34][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:10:41][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:10:41][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:10:41][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210831' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND PAY_TYPE IN ('80') GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND PAY_TYPE IN ('80') AND CANCEL_DATE BETWEEN '20210831' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210831' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:10:42][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:10:42][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:10:42][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:10:53][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:10:53][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:10:53][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210831' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND PAY_TYPE IN ('80') GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND PAY_TYPE IN ('80') AND CANCEL_DATE BETWEEN '20210831' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210831' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:10:54][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:10:54][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:10:54][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:11:03][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:11:04][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:11:04][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210831' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210831' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210831' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:11:04][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:11:04][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:11:04][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:11:13][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:11:13][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:11:13][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210831' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = 1639 AND SEQ IN ( SELECT 12469 FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = 1045 ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND A.PAY_TYPE <> '09' GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = 1639 AND SEQ IN ( SELECT 12469 FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = 1045 ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210831' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210831' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:11:14][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:11:14][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:11:14][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:11:14][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ REVERSE(LTRIM(SYS_CONNECT_BY_PATH(REVERSE(NAME), '/'), '/')) FROM TB_ORGANIZATION WHERE PARENT_SEQ = 0 START WITH SEQ = 12469 CONNECT BY SEQ = PRIOR PARENT_SEQ
[14:11:19][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:11:19][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:11:19][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210801' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = 1639 AND SEQ IN ( SELECT 12469 FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = 1045 ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND A.PAY_TYPE <> '09' GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = 1639 AND SEQ IN ( SELECT 12469 FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = 1045 ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210801' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210801' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:11:22][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:11:22][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:11:22][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:11:22][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ REVERSE(LTRIM(SYS_CONNECT_BY_PATH(REVERSE(NAME), '/'), '/')) FROM TB_ORGANIZATION WHERE PARENT_SEQ = 0 START WITH SEQ = 12469 CONNECT BY SEQ = PRIOR PARENT_SEQ
[14:12:05][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:12:05][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:12:05][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210801' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = 1639 AND SEQ IN ( SELECT 12469 FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = 1045 ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND PAY_TYPE IN ('80') GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = 1639 AND SEQ IN ( SELECT 12469 FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = 1045 ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND PAY_TYPE IN ('80') AND CANCEL_DATE BETWEEN '20210801' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210801' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:12:07][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:12:07][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:12:07][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:12:07][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ REVERSE(LTRIM(SYS_CONNECT_BY_PATH(REVERSE(NAME), '/'), '/')) FROM TB_ORGANIZATION WHERE PARENT_SEQ = 0 START WITH SEQ = 12469 CONNECT BY SEQ = PRIOR PARENT_SEQ
[14:13:38][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:13:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[14:13:38][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210801' AND '20210831' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = 1639 AND SEQ IN ( SELECT 11046 FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = 1045 ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND PAY_TYPE IN ('80') GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.ORGANIZATION_SEQ IN ( SELECT /*+ INDEX(TB_ORGANIZATION) */ SEQ FROM TB_ORGANIZATION WHERE SORT = 1 START WITH COMPANY_SEQ = 1639 AND SEQ IN ( SELECT 11046 FROM DUAL UNION SELECT /*+ INDEX(TB_USER_APP_ORGAN) */ ORGANIZATION_SEQ FROM TB_USER_APP_ORGAN WHERE SEQ = 1045 ) CONNECT BY PRIOR SEQ = PARENT_SEQ ) AND PAY_TYPE IN ('80') AND CANCEL_DATE BETWEEN '20210801' AND '20210831' ) A WHERE YYYYMMDD BETWEEN '20210801' AND '20210831' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[14:13:40][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[14:13:40][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[14:13:40][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:13:40][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_ORGANIZATION) */ REVERSE(LTRIM(SYS_CONNECT_BY_PATH(REVERSE(NAME), '/'), '/')) FROM TB_ORGANIZATION WHERE PARENT_SEQ = 0 START WITH SEQ = 11046 CONNECT BY SEQ = PRIOR PARENT_SEQ
[09:59:53][DEBUG](com.nucco.beans.User) - { CALL PG_AUTH.LOGIN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) }
[09:59:53][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[09:59:55][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[09:59:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[09:59:58][DEBUG](com.nucco.beans.Sales) - SELECT SEQ, NAME, IS_RAW_SALESCOUNT, ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NVL(MAX(DEPTH), 0) FROM TB_ORGANIZATION WHERE COMPANY_SEQ = A.SEQ ) AS DEPTH FROM TB_COMPANY A ORDER BY NAME
[09:59:59][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_TYPE' AND CODE <> '000' ORDER BY CODE
[10:00:00][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:00:19][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:00:19][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[10:00:19][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE = '80' THEN 1 END) AS CNT_ITEM, NVL(SUM(CASE WHEN PAY_TYPE = '80' THEN AMOUNT END), 0) AS AMOUNT_ITEM, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE = '80' THEN 1 END) AS CNT_ITEM, NVL(SUM(CASE WHEN PAY_TYPE = '80' THEN AMOUNT END), 0) AS AMOUNT_ITEM, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210906' AND '20210906' ) A WHERE YYYYMMDD BETWEEN '20210906' AND '20210906' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[10:00:19][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[10:00:19][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[10:00:19][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[10:00:55][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:00:55][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ SUBSTR(TRANSACTION_DATE, 1, 6) AS YYYYMM, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210901' AND '20210931' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' GROUP BY SUBSTR(TRANSACTION_DATE, 1, 6), COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT SUBSTR(YYYYMMDD, 1, 6) AS YYYYMM, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN -AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210901' AND '20210931' ) A WHERE YYYYMMDD BETWEEN '20210901' AND '20210931' GROUP BY SUBSTR(YYYYMMDD, 1, 6), COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMM DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[10:00:57][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[10:00:57][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[10:00:57][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[10:01:38][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[10:01:38][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE = '80' THEN 1 END) AS CNT_ITEM, NVL(SUM(CASE WHEN PAY_TYPE = '80' THEN AMOUNT END), 0) AS AMOUNT_ITEM, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE = '80' THEN 1 END) AS CNT_ITEM, NVL(SUM(CASE WHEN PAY_TYPE = '80' THEN AMOUNT END), 0) AS AMOUNT_ITEM, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210906' AND '20210906' ) A WHERE YYYYMMDD BETWEEN '20210906' AND '20210906' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[10:01:38][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[10:01:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[10:01:38][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 38573 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 38573 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 38573 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 38573 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 38573 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 38573 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:01:58][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:02:22][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:02:22][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ COUNT(*) FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99')
[10:02:22][DEBUG](com.nucco.beans.Sales) - SELECT /*+ ORDERED USE_NL(B C D E F G H I) */ A.TRANSACTION_DATE || A.TRANSACTION_TIME AS TRANSACTION_DATE, CASE WHEN A.CLOSING_DATE IS NOT NULL THEN A.CLOSING_DATE || NVL(A.CLOSING_TIME, '000000') END AS CLOSING_DATE, A.PURCHASE_DATE, CASE WHEN A.PAY_STEP = '02' THEN A.PAY_DATE_EXP ELSE A.PAY_DATE END AS PAY_DATE, CASE WHEN A.CANCEL_DATE IS NOT NULL THEN A.CANCEL_DATE || NVL(A.CANCEL_TIME, '000000') END AS CANCEL_DATE, A.TERMINAL_ID, A.TRANSACTION_NO, A.ITEM_COUNT, A.AMOUNT, A.COL_NO, B.NAME AS ORGAN, C.PLACE, NVL(D.NAME, ' [' || A.COL_NO || ']') AS GOODS, E.CODE AS VM_CODE, F.NAME AS PAY_TYPE, G.NAME AS PAY_STEP, H.NAME AS INPUT_TYPE, I.NAME AS PAY_CARD FROM ( SELECT ROWNUM AS ROW_NUM, A.* FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ * FROM TB_SALES A WHERE A.TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND A.COMPANY_SEQ = 1639 AND VM_PLACE_SEQ = 40770 AND A.PAY_TYPE <> '09' AND PAY_STEP NOT IN ('00', '99') ORDER BY A.TRANSACTION_DATE DESC, A.TRANSACTION_TIME DESC ) A WHERE ROWNUM <= 30) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ LEFT JOIN TB_PRODUCT D ON A.COMPANY_SEQ = D.COMPANY_SEQ AND A.PRODUCT_CODE = D.CODE LEFT JOIN TB_VENDING_MACHINE E ON A.TERMINAL_ID = E.TERMINAL_ID LEFT JOIN TB_CODE F ON A.PAY_TYPE = F.CODE AND F.TYPE = 'PAY_TYPE' LEFT JOIN TB_CODE G ON A.PAY_STEP = G.CODE AND G.TYPE = 'PAY_STEP' LEFT JOIN TB_CODE H ON A.INPUT_TYPE = H.CODE AND H.TYPE = 'INPUT_TYPE' LEFT JOIN TB_CODE I ON A.PAY_CARD = I.CODE AND I.TYPE = 'PAY_CARD' WHERE A.ROW_NUM >= 1
[10:02:22][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC) WHERE ROWNUM = 1
[10:02:22][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ IS_VIEW_CLOSING FROM TB_COMPANY WHERE SEQ = 1639
[10:02:51][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[10:02:51][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ CODE, NAME FROM TB_CODE WHERE TYPE = 'PAY_CARD' AND CODE <> '000' ORDER BY CODE
[10:02:51][DEBUG](com.nucco.beans.Sales) -  SELECT /*+ ORDERED USE_HASH(B C D) */ A.*, B.NAME AS ORGAN, B.CODE AS ORGAN_CODE, C.PLACE AS PLACE, D.CODE AS VM_CODE FROM ( SELECT /*+ INDEX(A IX_SALES_TRANSACTION_DATE) */ TRANSACTION_DATE AS YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE = '80' THEN 1 END) AS CNT_ITEM, NVL(SUM(CASE WHEN PAY_TYPE = '80' THEN AMOUNT END), 0) AS AMOUNT_ITEM, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN AMOUNT END), 0) AS AMOUNT_PREPAY FROM TB_SALES A WHERE TRANSACTION_DATE BETWEEN '20210906' AND '20210906' AND PAY_STEP NOT IN ('00', '99') AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' GROUP BY TRANSACTION_DATE, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ UNION ALL SELECT YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ, COUNT(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN 1 END) AS CNT_CARD, NVL(SUM(CASE WHEN PAY_TYPE = '01' and pay_step <> '06' THEN -AMOUNT END), 0) AS AMOUNT_CARD, COUNT(CASE WHEN PAY_TYPE = '07' THEN 1 END) AS CNT_PAYCO, NVL(SUM(CASE WHEN PAY_TYPE = '07' THEN AMOUNT END), 0) AS AMOUNT_PAYCO, COUNT(CASE WHEN PAY_TYPE = '80' THEN 1 END) AS CNT_ITEM, NVL(SUM(CASE WHEN PAY_TYPE = '80' THEN AMOUNT END), 0) AS AMOUNT_ITEM, COUNT(CASE WHEN PAY_TYPE IN ('02', '10') THEN 1 END) AS CNT_CASH, NVL(SUM(CASE WHEN PAY_TYPE IN ('02', '10') THEN -AMOUNT END), 0) AS AMOUNT_CASH, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN 1 END) AS CNT_PREPAY_CSB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'CSB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_CSB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN 1 END) AS CNT_PREPAY_KRP, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'KRP' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_KRP, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN 1 END) AS CNT_PREPAY_MYB, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'MYB' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_MYB, COUNT(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN 1 END) AS CNT_PREPAY_TMN, NVL(SUM(CASE WHEN PAY_TYPE = '11' AND PAY_CARD = 'TMN' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY_TMN, COUNT(CASE WHEN PAY_TYPE = '11' THEN 1 END) AS CNT_PREPAY, NVL(SUM(CASE WHEN PAY_TYPE = '11' THEN -AMOUNT END), 0) AS AMOUNT_PREPAY FROM ( SELECT /*+ INDEX(A IX_SALES_PAY_STEP) */ CANCEL_DATE AS YYYYMMDD, A.* FROM TB_SALES A WHERE PAY_STEP = '29' AND TRANSACTION_DATE IS NOT NULL AND A.COMPANY_SEQ = 1639 AND A.PAY_TYPE <> '09' AND CANCEL_DATE BETWEEN '20210906' AND '20210906' ) A WHERE YYYYMMDD BETWEEN '20210906' AND '20210906' GROUP BY YYYYMMDD, COMPANY_SEQ, ORGANIZATION_SEQ, VM_PLACE_SEQ ) A INNER JOIN TB_ORGANIZATION B ON A.ORGANIZATION_SEQ = B.SEQ INNER JOIN TB_VENDING_MACHINE_PLACE C ON A.VM_PLACE_SEQ = C.SEQ INNER JOIN TB_VENDING_MACHINE D ON C.VM_SEQ = D.SEQ ORDER BY YYYYMMDD DESC, ORGAN, PLACE, VM_CODE, A.AMOUNT_CARD DESC
[10:02:52][DEBUG](com.nucco.beans.Sales) - SELECT NAME FROM ( SELECT /*+ INDEX(TB_ORGANIZATION) */ NAME FROM TB_ORGANIZATION WHERE COMPANY_SEQ = 1639 AND SORT = 0 ORDER BY DEPTH DESC ) WHERE ROWNUM = 1
[10:02:52][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_CODE) */ NAME FROM TB_CODE WHERE TYPE = 'SUM_TYPE' AND CODE = '01'
[10:02:52][DEBUG](com.nucco.beans.Sales) - SELECT /*+ INDEX(TB_COMPANY) */ NAME FROM TB_COMPANY WHERE SEQ = 1639
[14:06:54][DEBUG](com.nucco.beans.User) - { CALL PG_AUTH.LOGIN (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) }
[14:06:54][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
[14:06:55][DEBUG](com.nucco.GlobalConfig) - { CALL PG_AUTH.MENU (?, ?, ?, ?) }
